
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Lab 2 Primer &#8212; Real Time DSP Lab Manual</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=5115cc725059bd94278eecd172e13a965bf8f5a9" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=9c920249402e914e316237a7dbc6769907cce411"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Lab 2. Generating Cosine and Sine Waves" href="index.html" />
    <link rel="prev" title="Lab 1. Overview of Hardware and Software Tools" href="../lab1/index.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
      
      
      <h1 class="site-logo" id="site-title">Real Time DSP Lab Manual</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../index.html">
                    ECE 445S Lab Component
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Introduction
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../primer.html">
   Lab Primer
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../stm32h735g.html">
   STM32H735G Discovery Kit Setup Guide
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../setup.html">
   Laboratory Hardware Setup
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../data.html">
   Managing data between MATLAB and C
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../troubleshooting.html">
   Troubleshooting / Frequently Asked Questions
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Labs
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../lab0/index.html">
   Lab 0. Review of Prerequisites (Optional)
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../lab1/index.html">
   Lab 1. Overview of Hardware and Software Tools
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Lab 2 Primer
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="index.html">
   Lab 2. Generating Cosine and Sine Waves
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../lab3/primer.html">
   Lab 3 Primer
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../lab3/index.html">
   Lab 3. Digital Filters
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../lab4/primer.html">
   Lab 4 Primer
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../lab4/index.html">
   Lab 4. Pseudo-Random Binary Sequences and Data Scramblers
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../lab5/primer.html">
   Lab 5 Primer
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../lab5/index.html">
   Lab 5. Digital Data Transmission by Baseband Pulse Amplitude Modulation (PAM)
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../lab6/primer.html">
   Lab 6 Primer
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../lab6/index.html">
   Lab 6. Quadrature Amplitude Modulation (QAM)
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../lab7/primer.html">
   Lab 7 Primer
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../lab7/index.html">
   Lab 7. Vocoder and Guitar Effects
  </a>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<div class="menu-dropdown menu-dropdown-launch-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Launch interactive content">
      <i class="fas fa-rocket"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="https://mybinder.org/v2/gh/Real-Time-DSP/lab/master?urlpath=tree/docs/lab2/primer.ipynb"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Launch on Binder"
>
  

<span class="headerbtn__icon-container">
  
    <img src="../_static/images/logo_binder.svg">
  </span>
<span class="headerbtn__text-container">Binder</span>
</a>

      </li>
      
    </ul>
  </div>
</div>

<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>

<div class="menu-dropdown menu-dropdown-repository-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Source repositories">
      <i class="fab fa-github"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="https://github.com/Real-Time-DSP/lab"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Source repository"
>
  

<span class="headerbtn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="headerbtn__text-container">repository</span>
</a>

      </li>
      
      <li>
        <a href="https://github.com/Real-Time-DSP/lab/issues/new?title=Issue%20on%20page%20%2Flab2/primer.html&body=Your%20issue%20content%20here."
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Open an issue"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="headerbtn__text-container">open issue</span>
</a>

      </li>
      
    </ul>
  </div>
</div>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">
      <i class="fas fa-download"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="../_sources/lab2/primer.ipynb"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.ipynb</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>
<label for="__page-toc"
  class="headerbtn headerbtn-page-toc"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
    <div class="tocsection onthispage pt-5 pb-3">
        <i class="fas fa-list"></i> Contents
    </div>
    <nav id="bd-toc-nav" aria-label="Page">
        <ul class="visible nav section-nav flex-column">
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#">
   Lab 2 Primer
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#methods-for-sinusoidal-generation">
     Methods for sinusoidal generation
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#polynomial-approximation-gnu-math-library">
       Polynomial approximation (GNU math library)
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#difference-equation">
       Difference equation
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#week-2">
   Week 2
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#lookup-table">
     Lookup table
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#lookup-table-with-interpolation-arm-dsp-library">
     Lookup table with interpolation (ARM DSP library)
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#direct-memory-access-and-frame-based-processing">
     Direct memory access and frame-based processing.
    </a>
   </li>
  </ul>
 </li>
</ul>

    </nav>
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Lab 2 Primer</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#">
   Lab 2 Primer
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#methods-for-sinusoidal-generation">
     Methods for sinusoidal generation
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#polynomial-approximation-gnu-math-library">
       Polynomial approximation (GNU math library)
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#difference-equation">
       Difference equation
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#week-2">
   Week 2
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#lookup-table">
     Lookup table
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#lookup-table-with-interpolation-arm-dsp-library">
     Lookup table with interpolation (ARM DSP library)
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#direct-memory-access-and-frame-based-processing">
     Direct memory access and frame-based processing.
    </a>
   </li>
  </ul>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <section class="tex2jax_ignore mathjax_ignore" id="lab-2-primer">
<h1>Lab 2 Primer<a class="headerlink" href="#lab-2-primer" title="Permalink to this heading">#</a></h1>
<p><a class="reference external" href="https://real-time-dsp.github.io/lab/lab2/primer.slides.html">Slides</a></p>
<p>Sinusoidal generation is a microcosm of real-time DSP systems. Although simple, this task demonstrates many important elements:</p>
<ul class="simple">
<li><p>Availability of several algorithms, providing trade offs between runtime implementation complexity and signal quality</p></li>
<li><p>Option to utilize polling, interrupts, or direct memory access (DMA)</p></li>
<li><p>Utilization of floating point computation and conversion</p></li>
<li><p>Utilization of a digital-to-analog converter</p></li>
<li><p>Presence of artifacts due to sampling and quantization</p></li>
</ul>
<section id="methods-for-sinusoidal-generation">
<h2>Methods for sinusoidal generation<a class="headerlink" href="#methods-for-sinusoidal-generation" title="Permalink to this heading">#</a></h2>
<p>Given some desired frequency <span class="math notranslate nohighlight">\(f_0\)</span>, we want to generate a causal sinusoid</p>
<div class="math notranslate nohighlight">
\[x(t) = u(t) \cos (2\pi f_0 t)\]</div>
<p>by sending the discrete signal <span class="math notranslate nohighlight">\(x[n] = u[n] \cos \left( 2\pi \frac{f_0}{f_s} n \right)\)</span> to a digital-to-analog converter (DAC).</p>
<p>We’ll consider four methods to generate this signal:</p>
<ul class="simple">
<li><p>Polynomial approximation (GNU math library)</p></li>
<li><p>Difference equation</p></li>
<li><p>Direct Lookup table</p></li>
<li><p>Lookup table with interpolation (ARM DSP math library)</p></li>
</ul>
<section id="polynomial-approximation-gnu-math-library">
<h3>Polynomial approximation (GNU math library)<a class="headerlink" href="#polynomial-approximation-gnu-math-library" title="Permalink to this heading">#</a></h3>
<p>When the <code class="docutils literal notranslate"><span class="pre">cos</span></code> function of math.h is invoked, the implementation is system dependent. However, a typical algorithm is to use a polynomial approximation</p>
<div class="math notranslate nohighlight">
\[ \cos(t) \approx a_0 + a_1 x + a_2 x^2 + a_3 x^3 \cdots\]</div>
<p>This is the approach used by the <a class="reference external" href="https://www.gnu.org/software/gsl">GNU scientific library</a>) which stores the first 11 coefficients of the approximation.</p>
<p>Horner’s form is used to minimize the number of operations required</p>
<div class="math notranslate nohighlight">
\[ a_{10} x^{10} + a_9 x^9 + a_8 x^8 + \dots + a_0 \]</div>
<div class="math notranslate nohighlight">
\[ = ( \dots (((a_{10} x + a_9) x + a_8) x \dots ) + a_0 \]</div>
<p>To generate a sinusoid of frequency <span class="math notranslate nohighlight">\(f_0\)</span>, need only repeat a few steps for each sample</p>
<ol class="arabic simple">
<li><p>Calculate <span class="math notranslate nohighlight">\(\cos(\theta)\)</span> via the approximation above and send the value to the DAC</p></li>
<li><p>Increment <span class="math notranslate nohighlight">\(\theta\)</span> by <span class="math notranslate nohighlight">\(\omega_0 = 2\pi \frac{f_0}{f_s}\)</span></p></li>
<li><p>Check if <span class="math notranslate nohighlight">\(\theta\)</span> exceeds <span class="math notranslate nohighlight">\(2\pi\)</span>. If it does, subtract <span class="math notranslate nohighlight">\(2\pi\)</span> to prevent overflow or loss of precision.</p></li>
</ol>
<p>This method produces a very accurate signal, but requires roughly 20 multiplications and 20 additions per sample in addition to the storage of the coefficients.</p>
<p>It is also extremely flexible, since it allows us to change the frequency as we please by simply changing the the amount at which we increment <span class="math notranslate nohighlight">\(\theta\)</span>.</p>
</section>
<section id="difference-equation">
<h3>Difference equation<a class="headerlink" href="#difference-equation" title="Permalink to this heading">#</a></h3>
<p>Consider the discrete-time linear time-invariant system governed by the difference equation</p>
<div class="math notranslate nohighlight">
\[ y[n] = (2 \cos \omega_0) y[n-1] - y[n-2] + (\sin \omega_0) x[n-1]) \]</div>
<p>This system is particularly interesting when we consider it’s stability. It is on the margin of being bounded-input bounded-output stable, but is technically unstable.</p>
<p>If the system were stable, then the output would eventually decay when excited by an impulse.</p>
<p>For many unstable systems, excitation by an impulse would cause the output to explode to <span class="math notranslate nohighlight">\(\pm \infty\)</span>.</p>
<p>However, the impulse response of this particular system is a constant amplitude causal sinusoid, motivating another method for generating a sinusoid:</p>
<ol class="arabic simple">
<li><p>Set the initial conditions to zero and apply a discrete-time impulse as the input.</p></li>
<li><p>Compute the output <span class="math notranslate nohighlight">\(y[n]\)</span> using the difference equation above.</p></li>
<li><p>Update the variables corresponding to <span class="math notranslate nohighlight">\(y[n-1]\)</span> and <span class="math notranslate nohighlight">\(y[n-2]\)</span>.</p></li>
<li><p>Repeat from step 2.</p></li>
</ol>
<p>This method requires only 2 multiplications and 3 additions per sample and the amount of computation per sample is independent from the desired frequency <span class="math notranslate nohighlight">\(f_0\)</span> and the sampling rate <span class="math notranslate nohighlight">\(f_s\)</span>.</p>
</section>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="week-2">
<h1>Week 2<a class="headerlink" href="#week-2" title="Permalink to this heading">#</a></h1>
<section id="lookup-table">
<h2>Lookup table<a class="headerlink" href="#lookup-table" title="Permalink to this heading">#</a></h2>
<p><span class="math notranslate nohighlight">\(\cos (2\pi f_0 t)\)</span> is a periodic signal with fundamental period <span class="math notranslate nohighlight">\(T_0 = 1/f_0\)</span></p>
<p>If the ratio <span class="math notranslate nohighlight">\(f_0 / f_s\)</span> is a rational number, it is convenient to express it as <span class="math notranslate nohighlight">\(\frac{f_0}{f_s} = \frac{N}{L}\)</span> where <span class="math notranslate nohighlight">\(N\)</span> and <span class="math notranslate nohighlight">\(L\)</span> are relatively prime. In this case, <span class="math notranslate nohighlight">\(\cos \left( 2\pi \frac{f_0}{f_s} n \right)\)</span> is also periodic with fundamental period <span class="math notranslate nohighlight">\(L\)</span>, i.e.,</p>
<div class="math notranslate nohighlight">
\[L=\frac{f_s}{\text{gcd}(f_0,f_s)} \text{samples}\]</div>
<p>This means that we can compute the first <span class="math notranslate nohighlight">\(L\)</span> values of the sinusoid ahead of time with arbitrary precision and store them in a lookup table. At runtime, we need only increment the current index and no additional computation is required.</p>
<p>The number <span class="math notranslate nohighlight">\(N\)</span> tells us how many continuous time sinusoidal periods occur during one discrete time period.</p>
</section>
<section id="lookup-table-with-interpolation-arm-dsp-library">
<h2>Lookup table with interpolation (ARM DSP library)<a class="headerlink" href="#lookup-table-with-interpolation-arm-dsp-library" title="Permalink to this heading">#</a></h2>
<p>The <a class="reference external" href="https://arm-software.github.io/CMSIS_5/DSP/html/group__cos.html">‘arm_cos_f32’ function from the CMSIS DSP library</a> stores a 512 element lookup table regardless of the desired frequency and sampling rate. Like the GNU math library, the function takes a phase as input (in radians), and returns the value of the cosine with that phase using three steps:</p>
<ol class="arabic simple">
<li><p>Find the integer table index <span class="math notranslate nohighlight">\(i\)</span> which is nearest to the desired phase</p></li>
<li><p>Compute the fractional portion <span class="math notranslate nohighlight">\(p\)</span> of the table index.</p></li>
<li><p>Return <span class="math notranslate nohighlight">\((1.0-p) \cdot \text{table}[i] + p \cdot \text{table}[i+1]\)</span>;</p></li>
</ol>
<p>This method requires more memory than the GNU math library but fewer multiply and addition operations.</p>
<p>Since this method always uses the same amount of memory for the lookup table (512 words), it might be preferred to the direct lookup table method if <span class="math notranslate nohighlight">\(L\)</span> is large.</p>
</section>
<section id="direct-memory-access-and-frame-based-processing">
<h2>Direct memory access and frame-based processing.<a class="headerlink" href="#direct-memory-access-and-frame-based-processing" title="Permalink to this heading">#</a></h2>
<p>Data is constantly flowing from ADC to main memory and from main memory to DAC. We could move the data using load/store operations, but this would use CPU cycles.</p>
<p>Instead, we can offload this process to a direct memory access (DMA) controller. As samples are generated from an input device (such as an ADC), the DMA controller automatically populates a buffer in CPU addressable memory space.</p>
<p>Rather than process individual samples, we wait for the buffer to fill so that we can process many samples at once. When the buffer is half full, an interrupt is triggered, signaling to the CPU that data is ready to be processed. In the background, samples continue being collected in the second half of the buffer so that no data is ever lost.</p>
<p>After processing is completed, the CPU can stores outputs in a second buffer which is also accessible to the DMA controller. The DMA controller feeds the data to the DAC as needed, avoiding unnecessary CPU load/store operations.</p>
<p>If multiple inputs or outputs are needed (e.g. stereo ADC/DAC), then they are typically interleaved.</p>
<p><img alt="" src="../_images/buffer_diagram_clear.png" /></p>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./lab2"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="../lab1/index.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Lab 1. Overview of Hardware and Software Tools</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="index.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Lab 2. Generating Cosine and Sine Waves</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By University of Texas at Austin<br/>
  
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>


  </body>
</html>