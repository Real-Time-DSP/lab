

<!DOCTYPE html>


<html >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Lab 4 Primer &#8212; Real Time DSP Lab Manual</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=e353d410970836974a52" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=e353d410970836974a52" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=e353d410970836974a52" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52" />

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'lab4/primer';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Lab 4. Pseudo-Random Binary Sequences and Data Scramblers" href="index.html" />
    <link rel="prev" title="Lab 3. Digital Filters" href="../lab3/index.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="None"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
    <p class="title logo__title">Real Time DSP Lab Manual</p>
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../index.html">
                    ECE 445S Lab Component
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Introduction</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../primer.html">Lab Primer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../stm32h735g.html">STM32H735G Discovery Kit Setup Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../setup.html">Laboratory Hardware Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="../data.html">Managing data between MATLAB and C</a></li>
<li class="toctree-l1"><a class="reference internal" href="../troubleshooting.html">Troubleshooting / Frequently Asked Questions</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Labs</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../lab0/index.html">Lab 0. Review of Prerequisites (Optional)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../lab1/index.html">Lab 1. Overview of Hardware and Software Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../lab2/primer.html">Lab 2 Primer</a></li>

<li class="toctree-l1"><a class="reference internal" href="../lab2/index.html">Lab 2. Generating Cosine and Sine Waves</a></li>
<li class="toctree-l1"><a class="reference internal" href="../lab3/primer.html">Lab 3 Primer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../lab3/index.html">Lab 3. Digital Filters</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Lab 4 Primer</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html">Lab 4. Pseudo-Random Binary Sequences and Data Scramblers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../lab5/primer.html">Lab 5 Primer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../lab5/index.html">Lab 5. Digital Data Transmission by Baseband Pulse Amplitude Modulation (PAM)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../lab6/primer.html">Lab 6 Primer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../lab6/index.html">Lab 6. Quadrature Amplitude Modulation (QAM)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../lab7/primer.html">Lab 7 Primer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../lab7/index.html">Lab 7. Vocoder and Guitar Effects</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/Real-Time-DSP/lab" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/Real-Time-DSP/lab/issues/new?title=Issue%20on%20page%20%2Flab4/primer.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/lab4/primer.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>


<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script>

<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Lab 4 Primer</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#applications-of-pseudo-random-binary-sequences">Applications of Pseudo-Random Binary Sequences</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#as-a-signal-for-test-measurement-and-calibration">As a signal for test, measurement, and calibration</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#as-a-training-signal">As a training signal</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#data-scrambler-descrabler">Data scrambler/descrabler</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#linear-feedback-shift-register-lfsr">Linear-feedback shift register (LFSR)</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#lfsr-for-pn-sequence-generation">LFSR for PN sequence generation</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#auto-correlation-of-pn-sequence">Auto-correlation of PN sequence</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#convolution">Convolution</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#cross-correlation">Cross-correlation</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#auto-correlation">Auto-correlation</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#auto-correlation-of-a-maximal-length-pn-sequence">Auto-correlation of a maximal length PN sequence</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#data-scrambling">Data scrambling</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#implementation-of-lfsr-in-c">Implementation of LFSR in C</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#bits-words-and-arrays">Bits, words, and arrays</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#review-of-bitwise-operations-in-c">Review of bitwise operations in C</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#addressing-individual-bits">Addressing individual bits</a></li>
</ul>
</li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="lab-4-primer">
<h1>Lab 4 Primer<a class="headerlink" href="#lab-4-primer" title="Permalink to this headline">#</a></h1>
<p><a class="reference external" href="https://real-time-dsp.github.io/lab/lab4/primer.slides.html">Slides</a></p>
<p>Pseudo-random binary sequences are also known as pseudo-noise (PN) sequences because the sequences resemble noise. These binary sequences appear to be random but instead have structure. They have all frequencies present; i.e., there are no nulls in the magnitude spectrum.</p>
<p><img alt="" src="../_images/PN_seq.svg" /></p>
<section id="applications-of-pseudo-random-binary-sequences">
<h2>Applications of Pseudo-Random Binary Sequences<a class="headerlink" href="#applications-of-pseudo-random-binary-sequences" title="Permalink to this headline">#</a></h2>
<p>PN sequences are widely used to</p>
<ul class="simple">
<li><p>generate test, measurement and calibration signals</p></li>
<li><p>generate training signals in communication systems</p></li>
<li><p>scramble and descramble data in communication systems</p></li>
</ul>
<section id="as-a-signal-for-test-measurement-and-calibration">
<h3>As a signal for test, measurement, and calibration<a class="headerlink" href="#as-a-signal-for-test-measurement-and-calibration" title="Permalink to this headline">#</a></h3>
<p>The first application is to use a PN sequence to estimate an impulse response of an unknown subsystem, e.g. the cascade of a source, empty chamber, and receiver in a biomedical instrument. Once the impulse response is known, calibration of the system can proceed by means of a linear time-invariant filter in the transmitter (known as a predistorter) or receiver (known as an equalizer) to compensate for the distortion in the subsystem.</p>
</section>
<section id="as-a-training-signal">
<h3>As a training signal<a class="headerlink" href="#as-a-training-signal" title="Permalink to this headline">#</a></h3>
<p>As a training signal, the PN sequence would be the digital data to be transmitted over the unknown communication channel. The receiver knows the bits that had been transmitted, and can use that knowledge to adapt receiver settings to improve communication performance (signal quality). The receiver can also estimate the impulse response of the communication channel if needed.</p>
</section>
<section id="data-scrambler-descrabler">
<h3>Data scrambler/descrabler<a class="headerlink" href="#data-scrambler-descrabler" title="Permalink to this headline">#</a></h3>
<p>The primary application of PN sequences in lab #4 is for data scrambling and descrambling. As a data scrambling sequence, pseudonoise can (1) eliminate strong DC components (long strongs of zeros and ones) in the baseband signal and (2) disperse the power spectrum to mitigate the effects of certain channel impairments.</p>
<ol class="arabic">
<li><p><strong>Eliminating DC components</strong></p>
<p>During a long string of zeros or ones, the primary frequency component in the signal would be at DC. For baseband transmission, this would not get passed by some communication channels (e.g. voiceband and acoustic channels). Some automatic gain control algorithms will also fail in the presence of a strong DC components. For bandpass transmission, the DC component is upconverted to sit at the carrier frequency. Strong components at this frequency will hinder the clock recovery and symbol synchronization subsystems.</p>
</li>
<li><p><strong>Mitigating channel impairments</strong></p>
<p>If a baseband signal has most of its power concentrated at specific frequencies, scrambling with a PN sequence can help disperse the spectrum to mitigate certain channel impairments. For example, a common impairment caused by nonlinearity or time-variance is intermodulation, or cross-modulation. The effect of intermodulation is greatly reduced by dispersing the power spectrum and eliminating signal components concentrated at specific frequencies.</p>
</li>
</ol>
</section>
</section>
<section id="linear-feedback-shift-register-lfsr">
<h2>Linear-feedback shift register (LFSR)<a class="headerlink" href="#linear-feedback-shift-register-lfsr" title="Permalink to this headline">#</a></h2>
<p>In Lab #4, we will use a a Fibonacci LFSR to (1) generate PN sequences, (2) scramble data, and (3) descramble data. This structure shares many similarities to the tapped delay line for filtering. Like the tapped delay line, the Fibonacci LFSR maintains a delay line of <span class="math notranslate nohighlight">\(m\)</span> elements <span class="math notranslate nohighlight">\(s[n-1], s[n-2], \ldots, s[n-m]\)</span>. Unlike the tapped delay line for LTI filters, the values are restricted to be binary (zero or one). Instead of real-valued coefficients, the LFSR has a set of taps <span class="math notranslate nohighlight">\(h_1, h_2, \ldots, h_m\)</span> which also have a binary state (connected or disconnected). Since all values are binary, additions are performed modulo two (equivalent to an exclusive or).</p>
<p><img alt="" src="../_images/Fibonacci_LFSR.svg" /></p>
<section id="lfsr-for-pn-sequence-generation">
<h3>LFSR for PN sequence generation<a class="headerlink" href="#lfsr-for-pn-sequence-generation" title="Permalink to this headline">#</a></h3>
<p>The procedure to produce a PN sequence using the LFSR consists of three steps:</p>
<ol class="arabic">
<li><p>Set the initial values <span class="math notranslate nohighlight">\(s[-1], s[-2], \ldots, s[-m]\)</span> so that at least one is nonzero.</p></li>
<li><p>Compute the addition modulo 2, equivalent to a series of exclusive or (<span class="math notranslate nohighlight">\(\oplus\)</span>) operations, of the connected taps in the shift register:</p>
<div class="math notranslate nohighlight">
\[ s[n] = \left( \sum_{k=1}^{m}{h_k s[n-k]} \right) \text{ mod } 2 = \bigoplus_{k=1}^{m}{h_k s[n-k]}\]</div>
</li>
<li><p>Shift each value along the delay line (i.e. increment n), then repeat starting from step two.</p></li>
</ol>
<p>With an appropriate choice of connected taps, the LFSR state will cycle through each of the <span class="math notranslate nohighlight">\(2^m - 1\)</span> possible (nonzero) combinations of <span class="math notranslate nohighlight">\(m\)</span> bits. In this case, we call the system a maximal-length LFSR, and <span class="math notranslate nohighlight">\(s[n]\)</span> is a <span class="math notranslate nohighlight">\((2^m -1)\)</span>-periodic PN sequence.</p>
<p>Determining mathematically if a combination of taps produces a maximal length sequence is difficult. However, for engineering applications, we can use configurations which are known to provide this property. For example, the following configuration results in a maximal length PN sequence with period <span class="math notranslate nohighlight">\(2^3 -1 = 7\)</span>.</p>
<p><img alt="" src="../_images/example_LFSR.svg" /></p>
<p>The first period of the this LFSR is listed below.</p>
<center>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="text-left head"><p><span class="math notranslate nohighlight">\(n\)</span></p></th>
<th class="text-right head"><p><span class="math notranslate nohighlight">\(s[n]=s[n-2]\oplus[n-3]\)</span></p></th>
<th class="text-center head"><p><span class="math notranslate nohighlight">\(s[n-1]\)</span></p></th>
<th class="text-center head"><p><span class="math notranslate nohighlight">\(s[n-2]\)</span></p></th>
<th class="text-center head"><p><span class="math notranslate nohighlight">\(s[n-3]\)</span></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p>0</p></td>
<td class="text-right"><p><center>1</center></p></td>
<td class="text-center"><p><center>1</center></p></td>
<td class="text-center"><p><center>0</center></p></td>
<td class="text-center"><p><center>1</center></p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>1</p></td>
<td class="text-right"><p><center>1</center></p></td>
<td class="text-center"><p><center>1</center></p></td>
<td class="text-center"><p><center>1</center></p></td>
<td class="text-center"><p><center>0</center></p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>2</p></td>
<td class="text-right"><p><center>0</center></p></td>
<td class="text-center"><p><center>1</center></p></td>
<td class="text-center"><p><center>1</center></p></td>
<td class="text-center"><p><center>1</center></p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>3</p></td>
<td class="text-right"><p><center>0</center></p></td>
<td class="text-center"><p><center>0</center></p></td>
<td class="text-center"><p><center>1</center></p></td>
<td class="text-center"><p><center>1</center></p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>4</p></td>
<td class="text-right"><p><center>1</center></p></td>
<td class="text-center"><p><center>0</center></p></td>
<td class="text-center"><p><center>0</center></p></td>
<td class="text-center"><p><center>1</center></p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>5</p></td>
<td class="text-right"><p><center>0</center></p></td>
<td class="text-center"><p><center>1</center></p></td>
<td class="text-center"><p><center>0</center></p></td>
<td class="text-center"><p><center>0</center></p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>6</p></td>
<td class="text-right"><p><center>1</center></p></td>
<td class="text-center"><p><center>0</center></p></td>
<td class="text-center"><p><center>1</center></p></td>
<td class="text-center"><p><center>0</center></p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>7</p></td>
<td class="text-right"><p><center>1</center></p></td>
<td class="text-center"><p><center>1</center></p></td>
<td class="text-center"><p><center>0</center></p></td>
<td class="text-center"><p><center>1</center></p></td>
</tr>
</tbody>
</table>
</center><p>Typically, we map the binary <span class="math notranslate nohighlight">\(\left\{ 0,1 \right\}\)</span> values to symmetric amplitudes <span class="math notranslate nohighlight">\(\left\{ -1,1 \right\}\)</span> when representing the PN sequence as a signal.</p>
</section>
<section id="auto-correlation-of-pn-sequence">
<h3>Auto-correlation of PN sequence<a class="headerlink" href="#auto-correlation-of-pn-sequence" title="Permalink to this headline">#</a></h3>
<p>In order to understand some of the useful properties of PN sequences, we need to first define the auto-correlation operation, which is closely related to convolution.</p>
<section id="convolution">
<h4>Convolution<a class="headerlink" href="#convolution" title="Permalink to this headline">#</a></h4>
<p>Recall that the convolution operation (denoted using <span class="math notranslate nohighlight">\(*\)</span>) for two discrete-time signals is defined as:</p>
<div class="math notranslate nohighlight">
\[x_1[n]*x_2[n] = \sum_{k=-\infty}^{\infty}x_1[k]x_2[n-k]\]</div>
<p>This operation is often described as ‘flip and slide’, since <span class="math notranslate nohighlight">\(x_2[n-k]\)</span> is a reversed and shifted version of <span class="math notranslate nohighlight">\(x_2[k]\)</span>.</p>
</section>
<section id="cross-correlation">
<h4>Cross-correlation<a class="headerlink" href="#cross-correlation" title="Permalink to this headline">#</a></h4>
<p>The cross-correlation operation (denoted using <span class="math notranslate nohighlight">\(\star\)</span>) is nearly identical to convolution, but without the ‘flip’.</p>
<div class="math notranslate nohighlight">
\[x_1[n]\star x_2[n] = \sum_{k=-\infty}^{\infty}\overline{x_1[k]}x_2[n+k]\]</div>
<p><em>Note: <span class="math notranslate nohighlight">\(\overline{x_1[k]}\)</span> denotes the complex conjugate of <span class="math notranslate nohighlight">\(x_1[k]\)</span>, but for real valued signals <span class="math notranslate nohighlight">\(\overline{x_1[k]}=x_1[k]\)</span>.</em></p>
</section>
<section id="auto-correlation">
<h4>Auto-correlation<a class="headerlink" href="#auto-correlation" title="Permalink to this headline">#</a></h4>
<p>The auto-correlation <span class="math notranslate nohighlight">\(R_{xx}[k]\)</span> of a discrete-time signal <span class="math notranslate nohighlight">\(x[n]\)</span> is the cross-correlation with itself:</p>
<div class="math notranslate nohighlight">
\[R_{xx}[n] = x[n]\star x[n] = \sum_{k=-\infty}^{\infty}\overline{x[k]}x[n+k]\]</div>
<p>For periodic signals the summation can be simplified, and the result is often normalized by the period <span class="math notranslate nohighlight">\(N\)</span>.</p>
<div class="math notranslate nohighlight">
\[R_{xx}[n] \text{ for periodic signal} = \frac{1}{N}x[n]\star x[n] = \frac{1}{N}\sum_{k=1}^{N}\overline{x[k]}x[n+k]\]</div>
</section>
<section id="auto-correlation-of-a-maximal-length-pn-sequence">
<h4>Auto-correlation of a maximal length PN sequence<a class="headerlink" href="#auto-correlation-of-a-maximal-length-pn-sequence" title="Permalink to this headline">#</a></h4>
<p>Applying the formula above to the maximal length PN sequence from the earlier example yields the following (normalized) auto-correlation:</p>
<p><img alt="" src="../_images/PN_autocorr.svg" /></p>
<p>The auto-correlation for this PN sequence is equal to one at integer multiples of the period <span class="math notranslate nohighlight">\(N\)</span> and is equal to <span class="math notranslate nohighlight">\(\frac{-1}{N}\)</span> for all other offsets. This behavior is the same for <em>all</em> maximal-length PN sequences, as long as the following two conditions are met:</p>
<ol class="arabic simple">
<li><p>The values of the binary PN sequence are mapped to <span class="math notranslate nohighlight">\(\left\{ -1,1 \right\}\)</span>. We avoid representing the sequence with <span class="math notranslate nohighlight">\(\left\{ 0,1 \right\}\)</span> because this would introduce a DC component.</p></li>
<li><p>The auto-correlation is taken of the infinite-length, periodically extended sequence. The auto-correlation of just one period can also be computed, but its properties will be different.</p></li>
</ol>
</section>
</section>
<section id="data-scrambling">
<h3>Data scrambling<a class="headerlink" href="#data-scrambling" title="Permalink to this headline">#</a></h3>
<p>Suppose we have a binary data sequence <span class="math notranslate nohighlight">\(x[n]\)</span> that we want to transmit. We can scramble the data by adding (modulo two) a scrambling sequence <span class="math notranslate nohighlight">\(s[n]\)</span>.</p>
<div class="math notranslate nohighlight">
\[x_s[n] = ( x[n] + s[n] ) \text{ mod 2} = x[n] \oplus s[n]\]</div>
<p>When <span class="math notranslate nohighlight">\(s[n]\)</span> is a PN sequence, the scrambler will (1) eliminate strong DC components (long strongs of zeros and ones) in the baseband signal and (2) disperse the power spectrum to mitigate the effects of certain channel impairments.</p>
<p>We can ‘undo’ the scrambler (i.e. descramble the data) using the same process:</p>
<div class="math notranslate nohighlight">
\[x_d[n] = ( x_s[n] + s[n] ) \text{ mod 2} = x_s[n] \oplus s[n]\]</div>
<p>If the same scrambling sequence <span class="math notranslate nohighlight">\(s[n]\)</span> is used for the scrambler and descrambler, then <span class="math notranslate nohighlight">\(x_d[n]=x[n].\)</span></p>
<p>By initializing two two LFSRs (one at the transmitter and one at the receiever) with the same initial conditions and connected taps <span class="math notranslate nohighlight">\(h_k\)</span>, this process can be made extremely efficient.</p>
</section>
</section>
<section id="implementation-of-lfsr-in-c">
<h2>Implementation of LFSR in C<a class="headerlink" href="#implementation-of-lfsr-in-c" title="Permalink to this headline">#</a></h2>
<p>In lab #4, you will implement the LFSR in C. To prepare, it is useful to review some topics in C programming.</p>
<section id="bits-words-and-arrays">
<h3>Bits, words, and arrays<a class="headerlink" href="#bits-words-and-arrays" title="Permalink to this headline">#</a></h3>
<p>Although it would be convenient to think of our generated PN sequence as an ‘array of bits’ there is no datatype in C that would allow this, since the smallest addressable unit of data in C is a byte (8 bits).</p>
<p>Typically, we refer to the unit of addressable data in an array as a ‘word’. For example, if we have an array of <code class="docutils literal notranslate"><span class="pre">int16_t</span></code>s, then we would say that <span class="math notranslate nohighlight">\(1 \text{ word} = 16 \text{ bits}\)</span>. If the array is composed of <code class="docutils literal notranslate"><span class="pre">float32_t</span></code>s, then <span class="math notranslate nohighlight">\(1 \text{ word} = 32 \text{ bits}\)</span>, and so on.</p>
<p>If we need to address individual bits in a long sequence of data in C, we can instead create an array of conveniently sized words and use bitwise operations to access individual bits in each word.</p>
</section>
<section id="review-of-bitwise-operations-in-c">
<h3>Review of bitwise operations in C<a class="headerlink" href="#review-of-bitwise-operations-in-c" title="Permalink to this headline">#</a></h3>
<p>There are six bitwise operations in c: <em>and</em> <code class="docutils literal notranslate"><span class="pre">&amp;</span></code>, <em>or</em> <code class="docutils literal notranslate"><span class="pre">|</span></code>, <em>xor</em> <code class="docutils literal notranslate"><span class="pre">^</span></code>, <em>left shift</em> <code class="docutils literal notranslate"><span class="pre">&lt;&lt;</span></code>, <em>right shift</em> <code class="docutils literal notranslate"><span class="pre">&gt;&gt;</span></code>, and <em>not</em><code class="docutils literal notranslate"><span class="pre">~</span></code>.</p>
<p>Most of these behave as you would expect, but the right shift <code class="docutils literal notranslate"><span class="pre">&gt;&gt;</span></code> is an exception. The behavior of the right shift <code class="docutils literal notranslate"><span class="pre">&gt;&gt;</span></code> operation depends on if the datatype is signed or unsigned, and varies depending on the compiler used. This is because there are two possible behaviors for the right shift operation</p>
<ol class="arabic simple">
<li><p>In a logical right shift, the most significant bit receives a value of zero. This is the behavior that occurs when operating on an unsigned datatype.</p></li>
<li><p>In an arithmetic right shift, the most significant bit (which is the sign bit for signed datatypes) is unchanged.</p></li>
</ol>
<p><em>Takeaway: use unsigned datatypes when implementing the LFSR in C to ensure that all shifts are logical shifts.</em></p>
<p>For left shift operations, the least significant bit always receives a value of zero in C, regardless of the data type.</p>
</section>
<section id="addressing-individual-bits">
<h3>Addressing individual bits<a class="headerlink" href="#addressing-individual-bits" title="Permalink to this headline">#</a></h3>
<p>There are many ways to use the bitwise operations above to perform addressing of individual bits. The easiest way to demonstrate is with an example. Suppose we have a variable <code class="docutils literal notranslate"><span class="pre">x</span></code> in C with the datatype <code class="docutils literal notranslate"><span class="pre">uint32_t</span></code> and we want to perform the following operation:</p>
<p><em>Example operation: Set the 6th least significant bit equal to the xor of the 4th and 2nd least significant bits.</em></p>
<p>Let’s outline one approach:</p>
<ol class="arabic">
<li><p>Create expressions corresponding to the 4th and 2nd least significant bits shifted to the least significant position:</p>
<p><code class="docutils literal notranslate"><span class="pre">x&gt;&gt;3</span></code> and <code class="docutils literal notranslate"><span class="pre">x&gt;&gt;1</span></code></p>
</li>
<li><p>Calculate the bitwise XOR of these expressions:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">x</span><span class="o">&gt;&gt;</span><span class="mi">3</span><span class="p">)</span> <span class="o">^</span> <span class="p">(</span><span class="n">x</span><span class="o">&gt;&gt;</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p>Mask out all other bits</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span> <span class="p">(</span><span class="n">x</span> <span class="o">&gt;&gt;</span> <span class="mi">3</span><span class="p">)</span> <span class="o">^</span> <span class="p">(</span><span class="n">x</span> <span class="o">&gt;&gt;</span> <span class="mi">1</span><span class="p">)</span> <span class="p">)</span> <span class="o">&amp;</span> <span class="mi">1</span>
</pre></div>
</div>
</li>
<li><p>Shift the expression to the desired position</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span> <span class="p">(</span> <span class="p">(</span><span class="n">x</span> <span class="o">&gt;&gt;</span> <span class="mi">3</span><span class="p">)</span> <span class="o">^</span> <span class="p">(</span><span class="n">x</span> <span class="o">&gt;&gt;</span> <span class="mi">1</span><span class="p">)</span> <span class="p">)</span> <span class="o">&amp;</span> <span class="mi">1</span> <span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="mi">5</span>
</pre></div>
</div>
</li>
<li><p>Clear the bit to prepare for assignment</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="p">(</span><span class="mi">1</span><span class="o">&lt;&lt;</span><span class="mi">5</span><span class="p">);</span>
</pre></div>
</div>
</li>
<li><p>Assign the result back to <code class="docutils literal notranslate"><span class="pre">x</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">|=</span> <span class="p">(</span> <span class="p">(</span> <span class="p">(</span><span class="n">x</span> <span class="o">&gt;&gt;</span> <span class="mi">3</span><span class="p">)</span> <span class="o">^</span> <span class="p">(</span><span class="n">x</span> <span class="o">&gt;&gt;</span> <span class="mi">1</span><span class="p">)</span> <span class="p">)</span> <span class="o">&amp;</span> <span class="mi">1</span> <span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="mi">5</span>
</pre></div>
</div>
</li>
</ol>
<p>At this point, the code has become very difficult to read! Although whitespace does not change the behavior, it can make the code somewhat more readable.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="p">(</span><span class="mi">1</span><span class="o">&lt;&lt;</span><span class="mi">5</span><span class="p">);</span>
<span class="n">x</span> <span class="o">|=</span> <span class="p">(</span>
       <span class="p">(</span> 
         <span class="p">(</span><span class="n">x</span> <span class="o">&gt;&gt;</span> <span class="mi">3</span><span class="p">)</span> <span class="o">^</span> <span class="p">(</span><span class="n">x</span> <span class="o">&gt;&gt;</span> <span class="mi">1</span><span class="p">)</span> 
       <span class="p">)</span> <span class="o">&amp;</span> <span class="mi">1</span>
     <span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="mi">5</span>
</pre></div>
</div>
<p>There are many other ways that this operation can be completed in C, so it can be helpful to try multiple approaches until you find a style you are comfortable with.</p>
</section>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./lab4"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
                <footer class="bd-footer-article">
                  
<div class="footer-article-items footer-article__inner">
  
    <div class="footer-article-item"><!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="../lab3/index.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Lab 3. Digital Filters</p>
      </div>
    </a>
    <a class="right-next"
       href="index.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Lab 4. Pseudo-Random Binary Sequences and Data Scramblers</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div></div>
  
</div>

                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#applications-of-pseudo-random-binary-sequences">Applications of Pseudo-Random Binary Sequences</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#as-a-signal-for-test-measurement-and-calibration">As a signal for test, measurement, and calibration</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#as-a-training-signal">As a training signal</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#data-scrambler-descrabler">Data scrambler/descrabler</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#linear-feedback-shift-register-lfsr">Linear-feedback shift register (LFSR)</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#lfsr-for-pn-sequence-generation">LFSR for PN sequence generation</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#auto-correlation-of-pn-sequence">Auto-correlation of PN sequence</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#convolution">Convolution</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#cross-correlation">Cross-correlation</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#auto-correlation">Auto-correlation</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#auto-correlation-of-a-maximal-length-pn-sequence">Auto-correlation of a maximal length PN sequence</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#data-scrambling">Data scrambling</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#implementation-of-lfsr-in-c">Implementation of LFSR in C</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#bits-words-and-arrays">Bits, words, and arrays</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#review-of-bitwise-operations-in-c">Review of bitwise operations in C</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#addressing-individual-bits">Addressing individual bits</a></li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By University of Texas at Austin
</p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=e353d410970836974a52"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>